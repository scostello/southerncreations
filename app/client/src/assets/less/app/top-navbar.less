/* ========================================================================
   Component: top-navbar.less
 ========================================================================== */

//
// Horizontal top navbar
// based on the bootstrap navbar styles and markup
// ----------------------------------------------------

@nav-header-wd:                 @aside-wd;
@nav-header-wd-toggled:         @aside-wd-collapsed;

@nav-top-bg:                    @brand-info;
@nav-top-bg-start:              @nav-top-bg;
@nav-top-bg-end:                @brand-info-light;
@nav-header-bg:                 transparent;

@nav-top-item-mobile:           @nav-top-bg;
@nav-top-item-mobile-active:    darken(@nav-top-item-mobile, 20%);

@nav-top-item-desktop:          #fff;
@nav-top-item-desktop-active:   @nav-top-item-mobile-active;


@menu-toggle-width: 40px;
@menu-toggle-bar-height: 4px;


.navbar {
    margin-bottom: 0;
    border-bottom: 1px solid #C9C9C9;

    &.navbar-utility {
        background: darken(@navbar-default-bg, 5%);
        height: @navbar-utility-height;
        min-height: @navbar-utility-height;
        margin: 0;

        .nav.navbar-utilitynav {
            .navbar-nav;

            & > li:last-child > a {
                padding-right: 35px;
            }

            & > li > a {
                font-size: 14px;
                padding-top: 0;
                padding-bottom: 0;
                color: darken(@brand-accent, 30%);
                line-height: @navbar-utility-height;
                .transition(color 0.3s);

                &:hover,
                &:active,
                &:focus,
                &.active {
                    background: inherit;
                    color: @brand-primary;
                }
            }

            @media (min-width: @screen-tablet) {
                float: right;
            }
        }
    }

    &.navbar-default {
        font-weight: 100;
        font-size: 23px;

        .nav.navbar-nav {
            overflow: hidden;

            & > li {
                &.active > a:after {
                    opacity: 1;
                    -webkit-transform: translateY(0px);
                    -moz-transform: translateY(0px);
                    transform: translateY(0px);
                }

                & > a {
                    position: relative;
                    padding-left: 30px;
                    padding-right: 30px;

                    &:after {
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        height: 4px;
                        background: @brand-primary;
                        content: '';
                        opacity: 0;
                        -webkit-transition: opacity 0.3s, -webkit-transform 0.3s;
                        -moz-transition: opacity 0.3s, -moz-transform 0.3s;
                        transition: opacity 0.3s, transform 0.3s;
                        -webkit-transform: translateY(10px);
                        -moz-transform: translateY(10px);
                        transform: translateY(10px);
                    }

                    &:hover:after,
                    &:active:after{
                        opacity: 1;
                        -webkit-transform: translateY(0px);
                        -moz-transform: translateY(0px);
                        transform: translateY(0px);
                    }
                }
            }

            @media (min-width: @screen-tablet) {
                float: right;
            }
        }

        .navbar-header {
            .navbar-brand {
                padding: 5px 15px 0 15px;
            }

            img.logo {
                width: 47px;
                height: 55px;
            }

            .navbar-toggle {
                border: none;
                padding: 15px 10px;

                &:hover,
                &:active,
                &:focus {
                    background: transparent;
                }

                .menu-toggle {
                    position: relative;
                    width: @menu-toggle-width;
                    height: @menu-toggle-bar-height;
                    background: #DDDDDD;
                    opacity: 1;
                    -webkit-transition: opacity 0.3s, -webkit-transform 0.3s;
                    -moz-transition: opacity 0.3s, -moz-transform 0.3s;
                    transition: opacity 0.3s, transform 0.3s;

                    &:before {
                        content: '';
                        display: block;
                        position: absolute;
                        width: @menu-toggle-width;
                        height: @menu-toggle-bar-height;
                        background: #DDDDDD;
                        top: -13px;
                        left: 0;
                        -webkit-transition: -webkit-transform 0.3s;
                        -moz-transition: -moz-transform 0.3s;
                        transition: transform 0.3s;
                    }

                    &:after {
                        content: '';
                        display: block;
                        position: absolute;
                        width: @menu-toggle-width;
                        height: @menu-toggle-bar-height;
                        background: #DDDDDD;
                        top: 13px;
                        left: 0;
                        -webkit-transition: -webkit-transform 0.3s;
                        -moz-transition: -moz-transform 0.3s;
                        transition: transform 0.3s;
                    }

                    &.open {
                        opacity: 0;

                        &:before {
                            opacity: 1;
                            -webkit-transform: rotate(45deg);
                            -moz-transform: rotate(45deg);
                            transform: rotate(45deg);
                        }

                        &:after {
                            opacity: 1;
                            -webkit-transform: rotate(-45deg);
                            -moz-transform: rotate(-45deg);
                            transform: rotate(-45deg);
                        }
                    }
                }
            }

        }
    }
}

// Navbar top layout
.topnavbar {
    -webkit-backface-visibility: hidden; /* fixes chrome jump */
    margin-bottom: 0;
    border-radius: 0;
    background-color: #fff;
    z-index: 1050;
    border-bottom: 1px solid rgba(0,0,0,.15);

    @media @tablet {
        .navbar-header {
            width: @nav-header-wd;
            text-align: center;
            .navbar-brand {
                width: 100%;
            }
        }
    }
}

// Navbar Mobile General styles
// ------------------------------

.topnavbar {
    position: relative;

    .navbar-header {
        background-color: @nav-header-bg;
        #gradient.horizontal(@nav-top-bg-start, @nav-top-bg-end);
        @media @tablet {
            background-image: none;
        }
    }

    .navbar-header {
        position: relative;
        // overlaps nav-wrapper
        z-index: 11;

        // Reset default to allow handle via different logo size
        .navbar-brand {
            padding: 0;
        }

        // Different Logo size depends on the navbar state
        .brand-logo,
        .brand-logo-collapsed {
            > img {
                margin: 0 auto;
            }
        }
        .brand-logo {
            display: block;
            padding: 10px 15px;
        }
        .brand-logo-collapsed {
            display: none;
            padding: 6px 15px;
        }
    }

    .navbar-nav > li > a,
    .navbar-nav > .open > a {
        color: @nav-top-item-mobile;
        &:hover, &:focus {
            color: @nav-top-item-mobile-active;
        }
    }

    // Navbar link active style
    .navbar-nav > .active > a,
    .navbar-nav > .open   > a {
        &, &:hover, &:focus {
            background-color: transparent;
        }
    }

    // the button to toggle search
    .navbar-nav > li > [data-toggle='navbar-search'] {
        position: absolute;
        top: 0;
        right: 0;
        z-index: 20;
        font-size: 16px;
        line-height: @navbar-height;
        color: #fff;
        padding-top: 0;
        padding-bottom: 0;
        .transition(color .3s ease);
        @media @tablet {
            color: @nav-top-item-desktop;
        }
    }

}

@media @upto-tablet {
    .sidebar-toggle {
        position: absolute !important;
        top: 5px;
        right: 0;
        color: white !important;
        z-index: 3001;
    }
}

// contains elements below header
.nav-wrapper {
    padding: 0 15px;
    background-color: transparent;

    // restore floating props for navbar items
    .nav.navbar-nav {
        float: left;
        &.navbar-right {
            float: right;
        }
    }
    .nav > li {
        position: static;
        float: left;
    }

    // fullwidth dropdowns
    .navbar-nav .open .dropdown-menu {
        position: absolute;
        background-color: rgb(255, 255, 255);
        left: 0px;
        right: 0px;
        border-top: 1px solid #e1e1e1;
        border-bottom: 1px solid #e1e1e1;
    }
}



// Navbar Desktop styles
// ------------------------------

@media @tablet {

    // Navbar top styles
    .topnavbar {

        border: 0;
        background-color: @nav-top-bg;
        #gradient.horizontal(@nav-top-bg-start, @nav-top-bg-end);

        .navbar-header {
            #gradient-remove();
        }

        // Dropdown link open style
        .navbar-nav > a {
            box-shadow: 0 0 0 #000 inset;
            .transition(all .2s);
        }

        .navbar-nav > .open > a {
            &, &:hover, &:focus {
                box-shadow: 0 -3px 0 darken(@nav-top-bg, 6%) inset;
                .transition(all .2s);
            }
        }

        .navbar-nav > li > a,
        .navbar-nav > .open > a {
            color: @nav-top-item-desktop;
            &:hover, &:focus {
                color: @nav-top-item-desktop-active;
            }
        }

        // relocate search toggle button
        .navbar-nav > li > [data-toggle='navbar-search'] {
            position: static;
        }

    } // .topnavbar


    .nav-wrapper {
        .clearfix();
        position: relative;
        //background-color: @nav-top-bg;
        box-shadow: 0 1px 2px rgba(0,0,0,.15);
        // behined nav-header
        z-index: 10;

        // restore nav items positions
        .nav > li {
            //position: relative;
        }

        // restore opened dropdown
        .navbar-nav .open .dropdown-menu {
            left: auto;
            right: auto;
        }
        .navbar-nav.navbar-right .open .dropdown-menu {
            left: auto;
            right: 0;
        }
    }
}

@media @tablet {
    .aside-collapsed {
        .topnavbar {
            .navbar-header {
                .brand-logo { display: none; }
                .brand-logo-collapsed { display: block; }
            }

            .navbar-header {
                width: @nav-header-wd-toggled;
            }

            .navbar-form {
                left: @nav-header-wd-toggled;
            }
        }
    }
}



// helper mixin to disable bs gradient mixin
#gradient-remove() {
    background-image: none;
    background-repeat: no-repeat;
    filter: none;
}